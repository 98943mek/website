<!DOCTYPE HTML>
<html>
	<head>
		<link href="index2.css" type="text/css" rel="stylesheet" />
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
		<title>main</title>

		<script>
		  function displayContent(x)
            {
                console.log(x);
                $("#right").load(x);
            }
            
            function addToTree(data, curr, treeObj)
            {
                console.log("addToTree(" + curr + "," + treeObj + ")");
                
                if(data[curr].numChildren == 0)
                {
                    $("#" + treeObj).append("<li><p onClick='displayContent(\"" + data[curr].fileName + "\")'>" + data[curr].text + "</p></li>");
                } else {
                    if(curr != 0)
                    {
                        $("#" + treeObj).append("<li>" + data[curr].text + "</li>");
                    }
                    
                    $("#" + treeObj).append("<ul class='circle' id='ul" + window.ulIdCnt + "'></ul>")
                    
                    var keep = window.ulIdCnt++;
                    
                    for(var i = 0; i < data[curr].numChildren; i++)
                    {
                        addToTree(data,data[curr].children[i],"ul" + keep);
                    }
                }
            }
            
            $(document).ready(
                function()
                {
                    console.log("load json");
                    
                    $.ajax
                    ({
                        url: "menu.json",
                        dataType: "json",
                        success: function(res)
                        {
                            console.log("json loaded");
                            window.ulIdCnt = 0;
                            addToTree(res.data,0,"menuDiv");
                        }
                    })
                });
		</script>
	</head>

	<body>
		<div id="upper">
            
		</div>

		<div id="left" class="middle">
          	<div id="menuDiv">

          	</div>
		</div>
		
		<div id="right" class="middle">
		</div>

		<div id="bottom">

		</div>
	</body>
</html> 