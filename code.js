document.write("<div class=\"pastie\">\n");
document.write("  <link href=\"http://pastie.org/stylesheets/embed.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\" />\n");
document.write("  <link href=\"http://pastie.org/stylesheets/themes/clean.css\" media=\"screen\" rel=\"stylesheet\" type=\"text/css\" />\n");
document.write("\n");
document.write("  \n");
document.write("\n");
document.write("\n");
document.write("\n");
document.write("\n");
document.write("	<div class=\"allcode\">\n");
document.write("		<table cellpadding=\"0\" cellspacing=\"0\" border=\"0\">\n");
document.write("		<tr>\n");
document.write("			<td>\n");
document.write("				<pre class=\"textmate-source-numbers\">1\n");
document.write("2\n");
document.write("3\n");
document.write("4\n");
document.write("5\n");
document.write("6\n");
document.write("7\n");
document.write("8\n");
document.write("9\n");
document.write("10\n");
document.write("11\n");
document.write("12\n");
document.write("13\n");
document.write("14\n");
document.write("15\n");
document.write("16\n");
document.write("17\n");
document.write("18\n");
document.write("19\n");
document.write("20\n");
document.write("21\n");
document.write("22\n");
document.write("23\n");
document.write("24\n");
document.write("25\n");
document.write("26\n");
document.write("27\n");
document.write("28\n");
document.write("29\n");
document.write("30\n");
document.write("31\n");
document.write("32\n");
document.write("33\n");
document.write("34\n");
document.write("35\n");
document.write("36\n");
document.write("37\n");
document.write("38\n");
document.write("39\n");
document.write("40\n");
document.write("41\n");document.write("42\n");document.write("43\n");document.write("44\n");document.write("45\n");document.write("46\n");document.write("47\n");document.write("48\n");document.write("49\n");document.write("50\n");document.write("51\n");document.write("52\n");document.write("53\n");document.write("54\n");document.write("55\n");document.write("56\n");document.write("57\n");document.write("58\n");document.write("59\n");document.write("60\n");document.write("61\n");document.write("62\n");document.write("63\n");document.write("64\n");document.write("65\n");document.write("66\n");document.write("67\n");document.write("68\n");document.write("69\n");document.write("70\n");document.write("71\n");document.write("72\n");document.write("73\n");document.write("74\n");document.write("75\n");document.write("76\n");document.write("77\n");document.write("78\n");document.write("79\n");document.write("80\n");document.write("81\n");document.write("82\n");document.write("83\n");document.write("84\n");document.write("85\n");document.write("86\n");document.write("87\n");document.write("88\n");document.write("89\n");document.write("<\/pre>\n");document.write("			<\/td>\n");document.write("		<td>\n");document.write("		<pre class=\"textmate-source\"><pre class=\"sunburst\"><span class=\'meta meta_preprocessor meta_preprocessor_c meta_preprocessor_c_include\'>#<span class=\'keyword keyword_control keyword_control_import keyword_control_import_include keyword_control_import_include_c\'>include<\/span> <span class=\'string string_quoted string_quoted_other string_quoted_other_lt-gt string_quoted_other_lt-gt_include string_quoted_other_lt-gt_include_c\'>&lt;cstdio&gt;<\/span><\/span>\n");
document.write("<span class=\'meta meta_preprocessor meta_preprocessor_c meta_preprocessor_c_include\'>#<span class=\'keyword keyword_control keyword_control_import keyword_control_import_include keyword_control_import_include_c\'>include<\/span> <span class=\'string string_quoted string_quoted_other string_quoted_other_lt-gt string_quoted_other_lt-gt_include string_quoted_other_lt-gt_include_c\'>&lt;vector&gt;<\/span><\/span>\n");document.write("<span class=\'meta meta_preprocessor meta_preprocessor_c meta_preprocessor_c_include\'>#<span class=\'keyword keyword_control keyword_control_import keyword_control_import_include keyword_control_import_include_c\'>include<\/span> <span class=\'string string_quoted string_quoted_other string_quoted_other_lt-gt string_quoted_other_lt-gt_include string_quoted_other_lt-gt_include_c\'>&lt;cstring&gt;<\/span><\/span>\n");document.write("<span class=\'keyword keyword_control keyword_control_c++\'>using<\/span> <span class=\'meta meta_namespace-block meta_namespace-block_c++\'><span class=\'storage storage_type storage_type_c++\'>namespace<\/span> <span class=\'entity entity_name entity_name_type entity_name_type_c++\'>std<\/span><\/span>;\n");document.write("\n");document.write("<span class=\'storage storage_modifier storage_modifier_c\'>const<\/span> <span class=\'storage storage_type storage_type_c\'>int<\/span> MAXN = <span class=\'constant constant_numeric constant_numeric_c\'>1e4<\/span>+<span class=\'constant constant_numeric constant_numeric_c\'>10<\/span>;\n");document.write("<span class=\'storage storage_type storage_type_c\'>int<\/span> N;\n");
document.write("\n");document.write("<span class=\'storage storage_type storage_type_c\'>typedef<\/span> pair&lt;<span class=\'storage storage_type storage_type_c\'>int<\/span>,<span class=\'storage storage_type storage_type_c\'>int<\/span>&gt; ii;\n");document.write("vector &lt;ii&gt; V[MAXN];\n");document.write("\n");document.write("<span class=\'storage storage_type storage_type_c\'>int<\/span> pass[MAXN];\n");document.write("<span class=\'storage storage_type storage_type_c\'>int<\/span> dp[MAXN];\n");document.write("\n");document.write("<span class=\'storage storage_type storage_type_c\'>int<\/span><span class=\'meta meta_function meta_function_c\'> <span class=\'entity entity_name entity_name_function entity_name_function_c\'>rec<\/span><span class=\'meta meta_parens meta_parens_c\'>(<span class=\'storage storage_type storage_type_c\'>int<\/span> u,<span class=\'storage storage_type storage_type_c\'>int<\/span> p)<\/span><span class=\'meta meta_block meta_block_c\'>{\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(pass[u]) <span class=\'keyword keyword_control keyword_control_c\'>return<\/span> dp[u];\n");document.write("\n");document.write("	<span class=\'storage storage_type storage_type_c\'>int<\/span> child = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++) <span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span> != p) child++; \n");document.write("\n");document.write("	pass[u] = <span class=\'constant constant_language constant_language_c\'>true<\/span>;\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(child == <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>) <span class=\'keyword keyword_control keyword_control_c\'>return<\/span> dp[u] = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>else<\/span> <span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(child == <span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> ans = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> v = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == p) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;\n");document.write("			ans =<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>rec<\/span>(<\/span>v,u);\n");document.write("		}<\/span>\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>return<\/span> dp[u] = ans;\n");document.write("	}<\/span><span class=\'keyword keyword_control keyword_control_c\'>else<\/span> <span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(child == <span class=\'constant constant_numeric constant_numeric_c\'>2<\/span>)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> xx = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> v = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == p) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;\n");document.write("			xx += V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.second<\/span>;\n");document.write("		}<\/span>\n");document.write("\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> ans = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> v = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == p) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;\n");document.write("			ans =<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>max<\/span>(<\/span>ans, xx +<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>rec<\/span>(<\/span>v,u));\n");document.write("		}<\/span>\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>return<\/span> dp[u] = ans;\n");document.write("	}<\/span><span class=\'keyword keyword_control keyword_control_c\'>else<\/span><span class=\'meta meta_block meta_block_c\'>{\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> vv = -<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>,idx = -<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>;\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> v = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == p) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;	\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> tmp_val = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.second<\/span> +<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>rec<\/span>(<\/span>v,u);\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(tmp_val &gt; vv)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("				vv = tmp_val;\n");document.write("				idx = v;\n");document.write("			}<\/span>\n");document.write("		}<\/span>\n");document.write("\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> idx2 = -<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>;\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> ans = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;i&lt;V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>size<\/span>(<\/span>);i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("			<span class=\'storage storage_type storage_type_c\'>int<\/span> v = V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.first<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == p) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;\n");document.write("			<span class=\'keyword keyword_control keyword_control_c\'>if<\/span>(v == idx) <span class=\'keyword keyword_control keyword_control_c\'>continue<\/span>;\n");document.write("			ans =<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>max<\/span>(<\/span>ans,V[u][i]<span class=\'variable variable_other variable_other_dot-access variable_other_dot-access_c\'>.second<\/span>);\n");document.write("		}<\/span>\n");document.write("		\n");document.write("		<span class=\'keyword keyword_control keyword_control_c\'>return<\/span> dp[u] = ans + vv;\n");document.write("	}<\/span>\n");document.write("}<\/span><\/span>\n");document.write("\n");document.write("<span class=\'storage storage_type storage_type_c\'>int<\/span><span class=\'meta meta_function meta_function_c\'> <span class=\'entity entity_name entity_name_function entity_name_function_c\'>main<\/span><span class=\'meta meta_parens meta_parens_c\'>()<\/span><span class=\'meta meta_block meta_block_c\'>{\n");document.write("	<span class=\'support support_function support_function_C99 support_function_C99_c\'>freopen<\/span>(<span class=\'string string_quoted string_quoted_double string_quoted_double_c\'>&quot;beads.in&quot;<\/span>,<span class=\'string string_quoted string_quoted_double string_quoted_double_c\'>&quot;r&quot;<\/span>,stdin);\n");document.write("	<span class=\'comment comment_line comment_line_double-slash comment_line_double-slash_c++\'>// freopen(&quot;beads.out&quot;,&quot;w&quot;,stdout);<\/span>\n");document.write("\n");document.write("	<span class=\'support support_function support_function_C99 support_function_C99_c\'>scanf<\/span>(<span class=\'string string_quoted string_quoted_double string_quoted_double_c\'>&quot;<span class=\'constant constant_other constant_other_placeholder constant_other_placeholder_c\'>%d<\/span>&quot;<\/span>,&amp;N);\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>;i&lt;N;i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("		<span class=\'storage storage_type storage_type_c\'>int<\/span> u,v,val;\n");document.write("		<span class=\'support support_function support_function_C99 support_function_C99_c\'>scanf<\/span>(<span class=\'string string_quoted string_quoted_double string_quoted_double_c\'>&quot;<span class=\'constant constant_other constant_other_placeholder constant_other_placeholder_c\'>%d<\/span> <span class=\'constant constant_other constant_other_placeholder constant_other_placeholder_c\'>%d<\/span> <span class=\'constant constant_other constant_other_placeholder constant_other_placeholder_c\'>%d<\/span>&quot;<\/span>,&amp;u,&amp;v,&amp;val);\n");document.write("		V[u].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>push_back<\/span>(<\/span><span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>ii<\/span>(<\/span>v,val));\n");document.write("		V[v].<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>push_back<\/span>(<\/span><span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>ii<\/span>(<\/span>u,val));\n");document.write("	}<\/span>\n");document.write("	<span class=\'storage storage_type storage_type_c\'>int<\/span> ans = <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>for<\/span>(<span class=\'storage storage_type storage_type_c\'>int<\/span> i=<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>;i&lt;=N;i++)<span class=\'meta meta_block meta_block_c\'>{\n");document.write("		<span class=\'support support_function support_function_C99 support_function_C99_c\'>memset<\/span>(pass,<span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>,<span class=\'keyword keyword_operator keyword_operator_sizeof keyword_operator_sizeof_c\'>sizeof<\/span> pass);\n");document.write("		ans =<span class=\'meta meta_function-call meta_function-call_c\'> <span class=\'support support_function support_function_any-method support_function_any-method_c\'>max<\/span>(<\/span>ans,<span class=\'meta meta_function-call meta_function-call_c\'><span class=\'support support_function support_function_any-method support_function_any-method_c\'>rec<\/span>(<\/span>i,-<span class=\'constant constant_numeric constant_numeric_c\'>1<\/span>));\n");document.write("	}<\/span>\n");document.write("	<span class=\'support support_function support_function_C99 support_function_C99_c\'>printf<\/span>(<span class=\'string string_quoted string_quoted_double string_quoted_double_c\'>&quot;<span class=\'constant constant_other constant_other_placeholder constant_other_placeholder_c\'>%d<\/span><span class=\'constant constant_character constant_character_escape constant_character_escape_c\'>\\n<\/span>&quot;<\/span>,ans);\n");document.write("	<span class=\'keyword keyword_control keyword_control_c\'>return<\/span> <span class=\'constant constant_numeric constant_numeric_c\'>0<\/span>;\n");document.write("}<\/span><\/span>\n");document.write("<\/pre><\/pre>\n");document.write("		<\/td>\n");document.write("		<\/tr>\n");document.write("		<\/table>\n");document.write("	<\/div>\n");document.write("\n");document.write("  \n");document.write("  <div class=\"credit\">\n");document.write("    <div class=\"buttons\">\n");document.write("      <a href=\"http://pastie.org/pastes/9204669.txt\">\n");document.write("      <img src=\"http://pastie.org/images/view.png\" height=\"20\" width=\"67\" /><\/a>\n");document.write("    <\/div>\n");document.write("  \n");document.write("    <a href=\"http://pastie.org/9204669\">Pastie #9204669<\/a> linked directly from <a href=\"http://pastie.org/\">Pastie<\/a>.\n");
document.write("  <\/div><\/div>");